<t t-name="rok_filestore_owl.FileGallery" owl="1">
  <div class="p-2 flex-grow-1" style="overflow-y: auto;">
    <t t-if="!props.files || props.files.length === 0">
      <p>No files in this folder.</p>
      <p>Current folder is: <t t-out="props.selectedPath"/></p>
    </t>
    <!-- <button class="btn btn-link" type="button"><i class="fa fa-plus-square"></i> Attach files </button> -->
    <form t-on-submit.prevent="props.onUpload" enctype="multipart/form-data" class="mb-2">
      <input type="file" name="file" required="required"/>
      <button type="submit" class="btn btn-primary btn-sm ms-1">Upload</button>
    </form>
    <div class="d-flex flex-wrap gap-2" t-if="onlyImages">
      <t t-foreach="props.files" t-as="file" t-key="file.url">
        <div class="o-mail-AttachmentCard d-flex flex-column rounded mb-1 me-1 mw-100 overflow-auto o-viewable" role="menu">
          <div class="d-flex justify-content-center">
            <a t-att-href="file.url" target="_blank">
              <img t-att-src="file.thumbUrl"
                style="cursor:pointer;max-width:128px;max-height:128px;" />
            </a>
          </div>
          <div class="d-flex flex-row">
            <div class="overflow-auto d-flex justify-content-center flex-column px-1">
              <div class="text-truncate"><t t-out="file.name"/></div>
              <small class="text-uppercase"></small>
            </div>
            <div class="flex-grow-1"></div>
            <div class="o-mail-AttachmentCard-aside position-relative rounded-end overflow-hidden d-flex o-hasMultipleActions flex-column">
              <button t-on-click.prevent="() => props.onDelete(file.path)" class="o-mail-AttachmentCard-unlink btn top-0 align-items-center justify-content-center d-flex w-100 h-100 rounded-0 border-0" title="Remove">
                <i class="fa fa-trash" role="img" aria-label="Remove"></i>
              </button>
              <a t-att-href="file.url" class="btn d-flex align-items-center justify-content-center w-100 h-100 rounded-0" title="Download">
                <i class="fa fa-download" role="img" aria-label="Download"></i>
              </a>
            </div>
          </div>
        </div>



        <!-- <div class="file-thumb">
          <a t-att-href="file.url" target="_blank">
            <img t-att-src="file.thumbUrl"
              style="cursor:pointer;max-width:128px;max-height:128px;" />
          </a>
          <button class="btn btn-sm btn-danger ms-1"
                  t-on-click.prevent="() => props.onDelete(file.path)">
            Delete
          </button>
          <div class="text-center">
            <t t-esc="file.name"/>

            <div class="flex-grow-1"></div>
            <div class="o-mail-AttachmentCard-aside position-relative rounded-end overflow-hidden d-flex o-hasMultipleActions flex-column">
              <button t-on-click.prevent="() => props.onDelete(file.path)" class="o-mail-AttachmentCard-unlink btn top-0 align-items-center justify-content-center d-flex w-100 h-100 rounded-0 border-0 bg-300" title="Remove">
                <i class="fa fa-trash" role="img" aria-label="Remove"></i>
              </button>
              <a t-att-href="file.url" class="btn d-flex align-items-center justify-content-center w-100 h-100 rounded-0 bg-300" title="Download">
                <i class="fa fa-download" role="img" aria-label="Download"></i>
              </a>
            </div>

          </div>
        </div> -->
      </t>
    </div>
    <div t-if="!onlyImages" class="d-flex">
      <t t-foreach="props.files" t-as="file" t-key="file.url">
        <div class="o-mail-AttachmentCard d-flex rounded mb-1 me-1 mw-100 overflow-auto o-viewable bg-300" role="menu">
          <div class="o-mail-AttachmentCard-image o_image flex-shrink-0 m-1" role="menuitem" aria-label="Preview" tabindex="-1" data-mimetype="text/plain"></div>
          <div class="overflow-auto d-flex justify-content-center flex-column px-1">
            <div class="text-truncate"><t t-out="file.name"/></div>
            <small class="text-uppercase"></small>
          </div>
          <div class="flex-grow-1"></div>
          <div class="o-mail-AttachmentCard-aside position-relative rounded-end overflow-hidden d-flex o-hasMultipleActions flex-column">
            <button t-on-click.prevent="() => props.onDelete(file.path)" class="o-mail-AttachmentCard-unlink btn top-0 align-items-center justify-content-center d-flex w-100 h-100 rounded-0 border-0 bg-300" title="Remove">
              <i class="fa fa-trash" role="img" aria-label="Remove"></i>
            </button>
            <a t-att-href="file.url" class="btn d-flex align-items-center justify-content-center w-100 h-100 rounded-0 bg-300" title="Download">
              <i class="fa fa-download" role="img" aria-label="Download"></i>
            </a>
          </div>
        </div>
      </t>
    </div>
  </div>
</t>
